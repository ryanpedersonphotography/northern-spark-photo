# Northern Spark Photography - Site Documentation

## Site Overview

Northern Spark Photography is a photography business based in Nisswa, Minnesota, specializing in:
- Senior/graduation portraits
- Family photography
- Nature photography

## Technical Structure

The site is built with:
- React 18 with TypeScript
- Vite as the build tool
- TailwindCSS for styling
- Cloudinary for image management and optimization
- Formspree for contact form handling
- React Masonry CSS for the responsive image grid

## Content Structure

The site has the following main sections:

### 1. Photo Galleries
- Family photos (14 images)
- Senior/Graduation photos (25 images)
- Nature photos (14 images)

### 2. About Section
- Company overview
- Services offered
- Value proposition

### 3. Pricing Section
- Senior Portraits: $495
- Family Session: $395
- Fashion Portfolio: $695
- Additional options (extra hours, locations, etc.)

### 4. Contact Section
- Contact form (using Formspree)
- Email: northernsparkstudio@gmail.com
- Phone: (218) 270-8159

## Image Processing

The site uses Cloudinary for sophisticated image handling with a hybrid approach:

### Image Grid (Thumbnails)
Uses Cloudinary's `AdvancedImage` component from `@cloudinary/react` with plugins for:
- Responsive images with different sizes for different devices
- Lazy loading with blur-up placeholders
- Grayscale effect applied to gallery images

Implementation:
```tsx
<AdvancedImage
  cldImg={cldImage}
  plugins={[
    // Responsive plugin handles different screen sizes
    responsive({ steps: [400, 800, 1200, 1600, 2000] }),
    // Placeholder plugin creates a blurred loading effect
    placeholder({ mode: 'blur' }),
    // Lazyload plugin defers loading until the image is near the viewport
    lazyload({ rootMargin: '10px 20px 10px 30px', threshold: 0.25 })
  ]}
  alt={image.alt}
  className="w-full object-cover block transition-transform duration-500 hover:scale-105"
/>
```

### Lightbox (Full-size Images)
Uses standard `<img>` tags with URLs generated by Cloudinary utility functions for:
- Full-size images without grayscale effect
- Reliable loading without 404 errors
- Smooth transitions between images

Implementation:
```tsx
<img
  src={mainImageUrl}
  alt={currentImage.alt}
  className="max-w-full max-h-full object-contain transition-opacity duration-300"
  style={{
    opacity: isLoading ? 0 : 1,
    transition: 'opacity 0.5s ease'
  }}
  onLoad={handleMainImageLoaded}
  onError={() => {
    console.error('Image failed to load:', currentImage.publicId);
    setIsLoading(false);
  }}
/>
```

## User Experience Features

- **Masonry Grid Layout**: Responsive grid that adapts to different screen sizes and image orientations
- **Lightbox**: Full-screen image viewer with navigation controls
- **Keyboard Navigation**: Arrow keys for navigation, Escape to close
- **Touch Navigation**: Swipe gestures for mobile devices
- **Responsive Design**: Adapts to different screen sizes
- **Image Preloading**: Preloads adjacent images for smoother navigation
- **Lazy Loading**: Only loads images as they come into view
- **Placeholder Images**: Blurred thumbnails while images load

## Social Media Presence

- Instagram: @northernsparkstudio
- Facebook: /northernsparkstudio
- VSCO: /northernsparkstudio

## Image Optimization Advantages

### Improved Image Grid Performance

#### Responsive Images
- **Implementation**: AdvancedImage's responsive plugin automatically handles different screen sizes and resolutions
- **Benefit**: Better performance across devices with less code

#### Optimized Lazy Loading
- **Implementation**: AdvancedImage's lazyload plugin with fine-tuned thresholds
- **Benefit**: Images load only when needed, reducing initial page load time and bandwidth usage

#### Better Placeholder Experience
- **Implementation**: Built-in placeholder plugin with blur effect
- **Benefit**: Smoother visual transitions and reduced layout shifts (better Core Web Vitals)

### Reduced Code Complexity

#### Simplified Component Logic
- **Before**: ~50 lines of custom loading, placeholder, and hover effect logic
- **Now**: ~15 lines of declarative plugin configuration
- **Benefit**: More maintainable code with less room for bugs

#### Declarative Transformations
- **Implementation**: Declarative plugin configuration
- **Benefit**: Easier to understand and modify image behavior

### Future-Proofing

#### Automatic Updates
- **Implementation**: Cloudinary SDK handles optimization best practices
- **Benefit**: As Cloudinary improves their SDK, the site automatically benefits

#### Easier Feature Additions
- **Implementation**: Can add new plugins as needed
- **Benefit**: Simpler path to adding features like accessibility improvements

### Reliability Through Hybrid Approach

#### Best Tool for Each Job
- **Grid View**: AdvancedImage with plugins for thumbnail optimization
- **Lightbox View**: Standard img tags for reliable full-size image loading
- **Benefit**: Optimal performance and reliability in both contexts

## Technical Notes

### Issues Encountered

When using the AdvancedImage component in the Lightbox, we encountered 404 errors. This was likely due to:

1. **Plugin Configuration**: The placeholder plugin was trying to generate a blurred placeholder image with URL transformations that weren't working correctly with our Cloudinary setup.

2. **URL Generation**: The AdvancedImage component was generating URLs differently than our manual approach.

3. **Transformation Chain**: The combination of transformations we were applying might have been incompatible with how the AdvancedImage component handles transformations internally.

### Solution

We implemented a hybrid approach:
- AdvancedImage for the grid view where thumbnail optimization is critical
- Standard img tags for the lightbox view where reliability is most important

## Dependencies

- @cloudinary/react: For the AdvancedImage component and plugins
- @cloudinary/url-gen: For URL generation and transformations
- react-masonry-css: For the responsive masonry layout
- @formspree/react: For the contact form

## Maintenance

- When updating the Cloudinary SDK versions, test both the grid view and lightbox view to ensure compatibility.
- The site uses TypeScript for type safety, which helps catch errors during development.
- The modular component structure makes it easy to update specific parts of the site without affecting others.